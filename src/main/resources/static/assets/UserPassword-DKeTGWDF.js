import{_ as P}from"./PageContainer-BVVqjsOY.js";import{l as V,k as n,m as k,o as C,e as x,w as a,q as o,v as i,cb as U,y as F}from"./index-BEALDuwY.js";import{a as N,E as S}from"./el-col-Btf57ow-.js";import{E as y,a as I}from"./el-form-item-BmTGu49f.js";import{E as R}from"./el-button-CffIBoYX.js";import{E as T}from"./el-input-DnAPq_uS.js";/* empty css                   */import"./_plugin-vue_export-helper-Cm_HEwFR.js";import"./castArray-DxzSp_WQ.js";import"./_baseClone-Bqs5NyXE.js";import"./_initCloneObject-9ZzmZcU1.js";import"./event-BB_Ol6Sd.js";const Y={__name:"UserPassword",setup(q){const d=V(),u=n(),s=n({old_pwd:"",new_pwd:"",re_pwd:""}),p=n(d.user.password),_=n({old_pwd:[{required:!0,message:"Please enter the original password",trigger:"blur"},{min:3,max:15,message:"The original password should be 3 to 15 characters long",trigger:"blur"},{validator:(m,e,r)=>{e!==p.value?r(new Error("Incorrect original password")):r()},trigger:"blur"}],new_pwd:[{required:!0,message:"Please enter the new password",trigger:"blur"},{min:3,max:15,message:"The new password should be 3 to 15 characters long",trigger:"blur"},{validator:(m,e,r)=>{e===s.value.old_pwd?r(new Error("New password must be different from the original")):r()},trigger:"blur"}],re_pwd:[{required:!0,message:"Please enter the new password again",trigger:"blur"},{min:3,max:15,message:"The confirm password should be between 3 and 15 characters long",trigger:"blur"},{validator:(m,e,r)=>{e!==s.value.new_pwd?r(new Error("Confirm password must match the new password")):r()},trigger:"blur"}]}),c=k(),f=async()=>{await u.value.validate(),p.value=s.value.re_pwd,await U({password:p.value}),F.success("Password Change Successful"),d.setToken(""),d.setUser({}),c.push("/login")},g=()=>{u.value.resetFields()};return(m,e)=>{const r=T,l=y,w=R,h=I,v=N,b=S,E=P;return C(),x(E,{title:"Change Password"},{default:a(()=>[o(b,null,{default:a(()=>[o(v,{span:12},{default:a(()=>[o(h,{ref_key:"formRef",ref:u,model:s.value,rules:_.value,"label-width":"100px"},{default:a(()=>[o(l,{label:"Original",prop:"old_pwd"},{default:a(()=>[o(r,{modelValue:s.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.old_pwd=t),"show-password":""},null,8,["modelValue"])]),_:1}),o(l,{label:"New",prop:"new_pwd"},{default:a(()=>[o(r,{modelValue:s.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.new_pwd=t),"show-password":""},null,8,["modelValue"])]),_:1}),o(l,{label:"Confirm",prop:"re_pwd"},{default:a(()=>[o(r,{modelValue:s.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.re_pwd=t),"show-password":""},null,8,["modelValue"])]),_:1}),o(l,null,{default:a(()=>[o(w,{type:"primary",onClick:f},{default:a(()=>[i("Change")]),_:1}),o(w,{onClick:g},{default:a(()=>[i("Reset")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1})}}};export{Y as default};
