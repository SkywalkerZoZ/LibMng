import{b as T,i as F,d as z,u as j,c as A,o as d,a as x,e as _,w as s,r as K,f as u,E as G,g as h,n as $,h as B,_ as H,j as J,k as g,l as O,m as Q,p as W,q as a,s as R,t as I,v,x as X,y as U,z as Y,A as E,B as S,C as Z,D as ee}from"./index-BEALDuwY.js";import{E as ae,a as se}from"./el-col-Btf57ow-.js";import{E as le,a as oe}from"./el-form-item-BmTGu49f.js";import{E as re}from"./el-button-CffIBoYX.js";import{E as te}from"./el-input-DnAPq_uS.js";/* empty css                   */import{_ as ne}from"./_plugin-vue_export-helper-Cm_HEwFR.js";import"./castArray-DxzSp_WQ.js";import"./_baseClone-Bqs5NyXE.js";import"./_initCloneObject-9ZzmZcU1.js";import"./event-BB_Ol6Sd.js";const ue=T({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:F}}),ie={click:i=>i instanceof MouseEvent},de=["href","target"],pe=z({name:"ElLink"}),fe=z({...pe,props:ue,emits:ie,setup(i,{emit:p}){const n=i,e=j("link"),w=A(()=>[e.b(),e.m(n.type),e.is("disabled",n.disabled),e.is("underline",n.underline&&!n.disabled)]);function k(o){n.disabled||p("click",o)}return(o,P)=>(d(),x("a",{class:$(u(w)),href:o.disabled||!o.href?void 0:o.href,target:o.disabled||!o.href?void 0:o.target,onClick:k},[o.icon?(d(),_(u(G),{key:0},{default:s(()=>[(d(),_(K(o.icon)))]),_:1})):h("v-if",!0),o.$slots.default?(d(),x("span",{key:1,class:$(u(e).e("inner"))},[B(o.$slots,"default")],2)):h("v-if",!0),o.$slots.icon?B(o.$slots,"icon",{key:2}):h("v-if",!0)],10,de))}});var me=H(fe,[["__file","link.vue"]]);const ce=J(me),N=i=>(Z("data-v-104f3f97"),i=i(),ee(),i),ge=N(()=>R("h1",null,"LMS",-1)),ve=N(()=>R("h1",null,"-Login",-1)),_e={__name:"LoginPage",setup(i){const p=g(!1),n=g(),e=g({username:"",password:"",repassword:"",email:"",userRole:"user"}),w={username:[{required:!0,message:"Please enter your username or email address",trigger:"blur"},{min:3,max:20,message:"3 to 20 characters long",trigger:"blur"}],password:[{required:!0,message:"Please enter your password",trigger:"blur"},{pattern:/^\S{3,15}$/,message:"3 to 15 characters long",trigger:"blur"}],repassword:[{required:!0,message:"Please enter your password again",trigger:"blur"},{pattern:/^\S{3,15}$/,message:"3 to 15 characters long",trigger:"blur"},{validator:(y,l,c)=>{l!==e.value.password?c(new Error("Passwords mismatch")):c()},trigger:"blur"}]},k=async()=>{await n.value.validate(),console.log(e.value),await X(e.value),U.success("Successful registration"),p.value=!1},o=O(),P=Q(),q=async()=>{await n.value.validate(),console.log(e.value);const y=await Y(e.value);o.setToken(y.data.data),console.log(y.data.data),U.success("Successful login"),P.push("/book/channel")},f=g("Reader"),b=g("Librarian"),M=()=>{f.value==="Reader"?(f.value="Librarian",b.value="Reader"):(f.value="Reader",b.value="Librarian"),e.value={username:"",password:"",repassword:"",email:""}};return W(f,()=>{f.value=="Librarian"?e.value.userRole="admin":e.value.userRole="user"}),(y,l)=>{const c=se,r=le,m=te,V=re,C=ce,L=oe,D=ae;return d(),_(D,{class:"login-page"},{default:s(()=>[a(c,{span:12,class:"bg"}),a(c,{span:6,offset:3,class:"form"},{default:s(()=>[ge,p.value?(d(),_(L,{key:0,model:e.value,rules:w,ref_key:"form",ref:n,size:"large",autocomplete:"off"},{default:s(()=>[a(r,null,{default:s(()=>[R("h1",null,"-"+I(f.value)+" Register",1)]),_:1}),a(r,{prop:"username"},{default:s(()=>[a(m,{modelValue:e.value.username,"onUpdate:modelValue":l[0]||(l[0]=t=>e.value.username=t),"prefix-icon":u(E),placeholder:"Please enter your username"},null,8,["modelValue","prefix-icon"])]),_:1}),a(r,{prop:"email"},{default:s(()=>[a(m,{modelValue:e.value.email,"onUpdate:modelValue":l[1]||(l[1]=t=>e.value.email=t),"prefix-icon":u(E),placeholder:"Please enter your email"},null,8,["modelValue","prefix-icon"])]),_:1}),a(r,{prop:"password"},{default:s(()=>[a(m,{modelValue:e.value.password,"onUpdate:modelValue":l[2]||(l[2]=t=>e.value.password=t),"prefix-icon":u(S),type:"password",placeholder:"Please enter your password"},null,8,["modelValue","prefix-icon"])]),_:1}),a(r,{prop:"repassword"},{default:s(()=>[a(m,{modelValue:e.value.repassword,"onUpdate:modelValue":l[3]||(l[3]=t=>e.value.repassword=t),"prefix-icon":u(S),type:"password",placeholder:"Please enter your password again"},null,8,["modelValue","prefix-icon"])]),_:1}),a(r,null,{default:s(()=>[a(V,{onClick:k,class:"button",type:"primary","auto-insert-space":""},{default:s(()=>[v(" Register ")]),_:1})]),_:1}),a(V,{plain:"",size:"small",onClick:M},{default:s(()=>[v("Switch to "+I(b.value)+" Registration",1)]),_:1}),a(r,{class:"flex"},{default:s(()=>[a(C,{type:"info",underline:!1,onClick:l[4]||(l[4]=t=>p.value=!1)},{default:s(()=>[v(" ← Back ")]),_:1})]),_:1})]),_:1},8,["model"])):(d(),_(L,{key:1,model:e.value,rules:w,ref_key:"form",ref:n,size:"large",autocomplete:"off"},{default:s(()=>[a(r,null,{default:s(()=>[ve]),_:1}),a(r,{prop:"username"},{default:s(()=>[a(m,{modelValue:e.value.username,"onUpdate:modelValue":l[5]||(l[5]=t=>e.value.username=t),"prefix-icon":u(E),placeholder:"Please enter your username"},null,8,["modelValue","prefix-icon"])]),_:1}),a(r,{prop:"password"},{default:s(()=>[a(m,{modelValue:e.value.password,"onUpdate:modelValue":l[6]||(l[6]=t=>e.value.password=t),name:"password","prefix-icon":u(S),type:"password",placeholder:"Please enter your password"},null,8,["modelValue","prefix-icon"])]),_:1}),a(r,{class:"flex"}),a(r,null,{default:s(()=>[a(V,{onClick:q,class:"button",type:"primary","auto-insert-space":""},{default:s(()=>[v("Login")]),_:1})]),_:1}),a(r,{class:"flex"},{default:s(()=>[a(C,{type:"info",underline:!1,onClick:l[7]||(l[7]=t=>p.value=!0)},{default:s(()=>[v(" Register → ")]),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}},Le=ne(_e,[["__scopeId","data-v-104f3f97"]]);export{Le as default};
