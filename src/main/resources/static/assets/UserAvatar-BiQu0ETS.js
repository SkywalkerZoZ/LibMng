import{_ as S}from"./PageContainer-BVVqjsOY.js";import{l as E,k as p,R as b,o as c,e as d,w as s,q as l,a as h,f as n,v as _,y as m,c0 as A,E as I,aY as f,c1 as x,C as B,D as C,s as R}from"./index-BEALDuwY.js";import{E as z}from"./el-button-CffIBoYX.js";import{E as D}from"./el-progress-DEsFnGuc.js";/* empty css                *//* empty css                   */import{_ as N}from"./_plugin-vue_export-helper-Cm_HEwFR.js";import"./_baseClone-Bqs5NyXE.js";import"./_initCloneObject-9ZzmZcU1.js";import"./isEqual-BDJixwU5.js";const V=o=>(B("data-v-ec2a53dd"),o=o(),C(),o),$=["src"],j=V(()=>R("br",null,null,-1)),q={__name:"UserAvatar",setup(o){const r=E(),a=p(""),u=p();b(async()=>{await r.getUser(),r.user.avatar&&(a.value=`data:image/jpeg;base64, ${r.user.avatar}`)});const v=t=>{if(t.raw.type!=="image/jpeg"){m.warning("Please select a JPEG format image");return}const e=new FileReader;e.readAsDataURL(t.raw),e.onload=()=>{a.value=e.result,console.log(a.value)}},g=()=>!a.value,U=async()=>{const t=a.value.replace(/^data:image\/[a-zA-Z]+;base64,/,"");await A({avatar:t}),await r.getUser(),m.success("Successful avatar update")};return(t,e)=>{const w=I,y=D,i=z,k=S;return c(),d(k,{title:"Change Avatar"},{default:s(()=>[l(y,{ref_key:"uploadRef",ref:u,"auto-upload":!1,class:"avatar-uploader","show-file-list":!1,"on-change":v},{default:s(()=>[a.value?(c(),h("img",{key:0,src:a.value,class:"avatar"},null,8,$)):(c(),d(w,{key:1,class:"avatar-uploader-icon"},{default:s(()=>[l(n(f))]),_:1}))]),_:1},512),j,l(i,{onClick:e[0]||(e[0]=M=>u.value.$el.querySelector("input").click()),type:"primary",icon:n(f),size:"large"},{default:s(()=>[_("Select Image")]),_:1},8,["icon"]),l(i,{onClick:U,type:"success",icon:n(x),size:"large",disabled:g()},{default:s(()=>[_("Upload avatar")]),_:1},8,["icon","disabled"])]),_:1})}}},O=N(q,[["__scopeId","data-v-ec2a53dd"]]);export{O as default};
