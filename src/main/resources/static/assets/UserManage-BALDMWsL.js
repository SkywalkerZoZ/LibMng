import{k as u,o as I,e as S,w as a,s as D,q as e,v as y,y as O,c as j,aE as q,ad as G,t as P,f as K,aF as A}from"./index-BEALDuwY.js";import{E as H,v as J}from"./el-empty-DekdHT7T.js";import{_ as Q}from"./PageContainer-BVVqjsOY.js";import{E as W}from"./el-pagination-CSgtznXV.js";import{E as x}from"./el-input-DnAPq_uS.js";import{P as X,E as Z,a as ee}from"./book-E4EKsRa-.js";import{E as ae}from"./el-dialog-DK3q9f31.js";import{b as le}from"./el-tooltip-BvgAGTTK.js";import{E as w,a as M}from"./el-form-item-BmTGu49f.js";import{E as R}from"./el-button-CffIBoYX.js";import"./el-overlay-MJv4Atf-.js";import{E as te}from"./el-date-picker-tQcjzh3L.js";import{_ as oe}from"./_plugin-vue_export-helper-Cm_HEwFR.js";import"./isEqual-BDJixwU5.js";import"./_initCloneObject-9ZzmZcU1.js";import"./event-BB_Ol6Sd.js";import"./refs-Det0-stg.js";import"./castArray-DxzSp_WQ.js";import"./_baseClone-Bqs5NyXE.js";const ne={class:"dialog-footer"},se={__name:"UserPenalty",emits:["success"],setup(z,{expose:i,emit:v}){const p=u(!1),l=u({id:"",name:"",reason:"",endDate:""}),c=u(),g=m=>{console.log(m),p.value=!0,l.value={...m},l.value.id=l.value.userId,l.value.name=l.value.username},E=v,_=async()=>{await X({reason:l.value.reason,endDate:l.value.endDate,userId:l.value.id}),p.value=!1,O.success("Successful Penalty!"),E("success")};return i({open:g}),(m,n)=>{const b=x,f=w,V=te,U=M,s=R,t=ae;return I(),S(t,{title:"Penalize Readers",modelValue:p.value,"onUpdate:modelValue":n[5]||(n[5]=r=>p.value=r),width:"30%"},{footer:a(()=>[D("span",ne,[e(s,{onClick:n[4]||(n[4]=r=>p.value=!1)},{default:a(()=>[y("Cancel")]),_:1}),e(s,{type:"primary",onClick:_},{default:a(()=>[y("OK")]),_:1})])]),default:a(()=>[e(U,{ref_key:"formRef",ref:c,model:l.value,"label-width":"100px",style:{"padding-right":"30px"}},{default:a(()=>[e(f,{prop:"id",label:"User ID"},{default:a(()=>[e(b,{modelValue:l.value.id,"onUpdate:modelValue":n[0]||(n[0]=r=>l.value.id=r),disabled:!!l.value.name},null,8,["modelValue","disabled"])]),_:1}),e(f,{prop:"name",label:"Username"},{default:a(()=>[e(b,{modelValue:l.value.name,"onUpdate:modelValue":n[1]||(n[1]=r=>l.value.name=r),disabled:!!l.value.name},null,8,["modelValue","disabled"])]),_:1}),e(f,{prop:"reason",label:"Reason"},{default:a(()=>[e(b,{modelValue:l.value.reason,"onUpdate:modelValue":n[2]||(n[2]=r=>l.value.reason=r),placeholder:"Please enter the reason"},null,8,["modelValue"])]),_:1}),e(f,{prop:"endDate",label:"Penalty End Date"},{default:a(()=>[e(V,{modelValue:l.value.endDate,"onUpdate:modelValue":n[3]||(n[3]=r=>l.value.endDate=r),type:"date",placeholder:"Pick a day",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}},re={class:"ellipsis"},ue={class:"ellipsis"},de={class:"pagination"},ie={__name:"UserManage",setup(z){const i=u([]),v=u(!1),p=u(0),l=u(1),c=u(10),g=async()=>{v.value=!1;const s=await q();i.value=s.data.data,p.value=i.value.length,v.value=!1};g();const E=j(()=>{const s=(l.value-1)*c.value,t=s+c.value;return i.value.slice(s,t)}),_=u(""),m=u(""),n=()=>{const s=i.value.filter(t=>t.userId.toString().includes(_.value)&&t.username.includes(m.value));i.value.splice(0,i.value.length,...s)},b=()=>{_.value="",m.value="",g()},f=()=>{g()},V=u(),U=s=>{V.value.open(s)};return(s,t)=>{const r=x,C=w,k=R,Y=M,d=Z,h=le,B=H,N=ee,L=W,T=Q,$=J;return I(),S(T,{title:"Reader Management"},{default:a(()=>[e(Y,{inline:""},{default:a(()=>[e(C,{label:"Reader ID:"},{default:a(()=>[e(r,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=o=>_.value=o),placeholder:"ID",clearable:""},null,8,["modelValue"])]),_:1}),e(C,{label:"Reader Username:"},{default:a(()=>[e(r,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=o=>m.value=o),placeholder:"Username",clearable:""},null,8,["modelValue"])]),_:1}),e(C,null,{default:a(()=>[e(k,{type:"primary",onClick:n},{default:a(()=>[y("Search")]),_:1}),e(k,{onClick:b},{default:a(()=>[y("Reset")]),_:1})]),_:1})]),_:1}),G((I(),S(N,{data:E.value,style:{width:"100%"}},{empty:a(()=>[e(B,{description:"No data"})]),default:a(()=>[e(d,{type:"index",label:"No",width:"100"}),e(d,{prop:"userId",label:"ID"}),e(d,{prop:"username",label:"Username"}),e(d,{prop:"email",label:"Email"},{default:a(({row:o})=>[e(h,{class:"item",effect:"dark",placement:"bottom",content:o.email},{default:a(()=>[D("div",re,P(o.email),1)]),_:2},1032,["content"])]),_:1}),e(d,{prop:"borrowDate",label:"Borrow Date"}),e(d,{prop:"dueDate",label:"Due Date"}),e(d,{prop:"isbn",label:"ISBN"},{default:a(({row:o})=>[e(h,{class:"item",effect:"dark",placement:"bottom",content:o.isbn},{default:a(()=>[D("div",ue,P(o.isbn),1)]),_:2},1032,["content"])]),_:1}),e(d,{prop:"instanceId",label:"instanceId"}),e(d,{label:"Operations",width:"150"},{default:a(({row:o,$index:F})=>[e(k,{icon:K(A),type:"danger",plain:"",onClick:pe=>U(o,F)},{default:a(()=>[y("Penalty")]),_:2},1032,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[$,v.value]]),e(se,{ref_key:"dialog",ref:V,onSuccess:f},null,512),D("div",de,[e(L,{"current-page":l.value,"onUpdate:currentPage":t[2]||(t[2]=o=>l.value=o),"page-size":c.value,"onUpdate:pageSize":t[3]||(t[3]=o=>c.value=o),layout:"total,prev, pager, next, jumper",total:p.value,onSizeChange:s.handleSizeChange,onCurrentChange:s.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1})}}},we=oe(ie,[["__scopeId","data-v-cefdf294"]]);export{we as default};
