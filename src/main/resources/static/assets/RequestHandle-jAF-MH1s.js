import{_ as C}from"./PageContainer-BVVqjsOY.js";import{k as u,p as V,o as d,e as _,w as s,s as r,q as e,t as q,f as g,v as w,g as h,y,aB as A,aD as N,C as H,D as L}from"./index-BEALDuwY.js";import{f as T,H as I,E as P,a as j}from"./book-E4EKsRa-.js";import{b as U}from"./el-tooltip-BvgAGTTK.js";import{E as $}from"./el-button-CffIBoYX.js";import{E as G}from"./el-switch-Sqcpzh7L.js";import{_ as M}from"./_plugin-vue_export-helper-Cm_HEwFR.js";import"./_initCloneObject-9ZzmZcU1.js";import"./isEqual-BDJixwU5.js";import"./event-BB_Ol6Sd.js";import"./validator-DhiFKoQh.js";const S=c=>(H("data-v-3891c5df"),c=c(),L(),c),O={class:"extra-container"},z=S(()=>r("div",{style:{"margin-right":"10px"}},"Pending",-1)),F=S(()=>r("div",{style:{"margin-left":"10px"}},"Resolved",-1)),J=["title"],K={style:{display:"flex","margin-right":"100px"}},Q={__name:"RequestHandle",setup(c){const m=u(),f=u(!1),n=u("0"),i=async t=>{f.value=!0;const l=await T(t);m.value=l.data.data,f.value=!1};i(n.value);const k=async t=>{console.log(t.borrowingId),await I(t.borrowingId,1),y.success("Request processed successfully!"),i(n.value)},B=async t=>{await I(t.borrowingId,0),y.success("Request processed successfully!"),i(n.value)};V(n,t=>{i(t)});const x=(t,l,p)=>{switch(p){case 0:return"Pending";case 1:return"Accepted";case 2:return"Rejected";default:return""}};return(t,l)=>{const p=G,b=U,a=P,v=$,D=j,R=C;return d(),_(R,{title:"Borrowing Processing"},{extra:s(()=>[r("div",O,[z,e(b,{content:"Status: "+n.value,placement:"top"},{default:s(()=>[e(p,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=o=>n.value=o),style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1},8,["content"]),F])]),default:s(()=>[e(D,{data:m.value},{default:s(()=>[e(a,{label:"Borrowing ID",prop:"borrowingId"}),e(a,{label:"Reader ID",prop:"userId"}),e(a,{label:"Reader Username",prop:"username"}),e(a,{label:"Book ID",prop:"instanceId"}),e(a,{label:"ISBN",prop:"isbn"},{default:s(({row:o})=>[e(b,{class:"item",effect:"dark",placement:"bottom",content:o.isbn},{default:s(()=>[r("div",{class:"ellipsis",title:o.isbn},q(o.isbn),9,J)]),_:2},1032,["content"])]),_:1}),e(a,{label:"Borrow Date",prop:"borrowDate"}),e(a,{label:"Due Date",prop:"dueDate"}),e(a,{label:"Request Status",prop:"borrowAprvStatus",formatter:x}),e(a,{label:"Operations",width:"250"},{default:s(({row:o})=>[r("div",K,[o.borrowAprvStatus===0?(d(),_(v,{key:0,plain:"",type:"primary",icon:g(A),onClick:E=>k(o)},{default:s(()=>[w("Accept")]),_:2},1032,["icon","onClick"])):h("",!0),o.borrowAprvStatus===0?(d(),_(v,{key:1,plain:"",type:"warning",icon:g(N),onClick:E=>B(o)},{default:s(()=>[w("Reject")]),_:2},1032,["icon","onClick"])):h("",!0)])]),_:1})]),_:1},8,["data"])]),_:1})}}},re=M(Q,[["__scopeId","data-v-3891c5df"]]);export{re as default};
