import{b2 as w,aI as y,b3 as A,R as U,ai as z,S as K,J as Y,bk as V,u as H,bl as $,a9 as x,p as j,aQ as q,a7 as J,bm as Q,a8 as g,bn as b,b as Z,H as O,d as P,q as F,h as _,ac as ee}from"./index-BEALDuwY.js";import{t as oe}from"./_plugin-vue_export-helper-Cm_HEwFR.js";let f;const te=e=>{var n;if(!w)return 0;if(f!==void 0)return f;const o=document.createElement("div");o.className=`${e}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const t=o.offsetWidth;o.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",o.appendChild(s);const l=s.offsetWidth;return(n=o.parentNode)==null||n.removeChild(o),f=t-l,f};function ae(e,n){if(!w)return;if(!n){e.scrollTop=0;return}const o=[];let t=n.offsetParent;for(;t!==null&&e!==t&&e.contains(t);)o.push(t),t=t.offsetParent;const s=n.offsetTop+o.reduce((r,d)=>r+d.offsetTop,0),l=s+n.offsetHeight,u=e.scrollTop,i=u+e.clientHeight;s<u?e.scrollTop=s:l>i&&(e.scrollTop=l-e.clientHeight)}var v=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(v||{});const S=e=>{const n=y(e)?e:[e],o=[];return n.forEach(t=>{var s;y(t)?o.push(...S(t)):A(t)&&y(t.children)?o.push(...S(t.children)):(o.push(t),A(t)&&((s=t.component)!=null&&s.subTree)&&o.push(...S(t.component.subTree)))}),o},ce=(e,n,o,t)=>{let s={offsetX:0,offsetY:0};const l=r=>{const d=r.clientX,p=r.clientY,{offsetX:E,offsetY:T}=s,a=e.value.getBoundingClientRect(),M=a.left,C=a.top,D=a.width,k=a.height,B=document.documentElement.clientWidth,I=document.documentElement.clientHeight,R=-M+E,W=-C+T,X=B-M-D+E,G=I-C-k+T,L=h=>{let c=E+h.clientX-d,m=T+h.clientY-p;t!=null&&t.value||(c=Math.min(Math.max(c,R),X),m=Math.min(Math.max(m,W),G)),s={offsetX:c,offsetY:m},e.value&&(e.value.style.transform=`translate(${Y(c)}, ${Y(m)})`)},N=()=>{document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",N)};document.addEventListener("mousemove",L),document.addEventListener("mouseup",N)},u=()=>{n.value&&e.value&&n.value.addEventListener("mousedown",l)},i=()=>{n.value&&e.value&&n.value.removeEventListener("mousedown",l)};U(()=>{z(()=>{o.value?u():i()})}),K(()=>{i()})},me=(e,n={})=>{V(e)||oe("[useLockscreen]","You need to pass a ref param to this function");const o=n.ns||H("popup"),t=$(()=>o.bm("parent","hidden"));if(!w||x(document.body,t.value))return;let s=0,l=!1,u="0";const i=()=>{setTimeout(()=>{g(document==null?void 0:document.body,t.value),l&&document&&(document.body.style.width=u)},200)};j(e,r=>{if(!r){i();return}l=!x(document.body,t.value),l&&(u=document.body.style.width),s=te(o.namespace.value);const d=document.documentElement.clientHeight<document.body.scrollHeight,p=q(document.body,"overflowY");s>0&&(d||p==="scroll")&&l&&(document.body.style.width=`calc(100% - ${s}px)`),J(document.body,t.value)}),Q(()=>i())},ne=e=>{if(!e)return{onClick:b,onMousedown:b,onMouseup:b};let n=!1,o=!1;return{onClick:u=>{n&&o&&e(u),n=o=!1},onMousedown:u=>{n=u.target===u.currentTarget},onMouseup:u=>{o=u.target===u.currentTarget}}},se=Z({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:O([String,Array,Object])},zIndex:{type:O([String,Number])}}),ue={click:e=>e instanceof MouseEvent},le="overlay";var ie=P({name:"ElOverlay",props:se,emits:ue,setup(e,{slots:n,emit:o}){const t=H(le),s=r=>{o("click",r)},{onClick:l,onMousedown:u,onMouseup:i}=ne(e.customMaskEvent?void 0:s);return()=>e.mask?F("div",{class:[t.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:u,onMouseup:i},[_(n,"default")],v.STYLE|v.CLASS|v.PROPS,["onClick","onMouseup","onMousedown"]):ee("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[_(n,"default")])}});const fe=ie;export{fe as E,me as a,ne as b,S as f,ae as s,ce as u};
